{% extends "base.html" %}
{% load static %}

{% block body_content %}
<nav class="relative h-[60px] flex justify-between items-center bg-white">
    <div class="w-[1200px] m-auto flex justify-between">
        <a class="text-[14px] mt-[10px] ml-[15px] font-bold" href="#">
            <span>Blogger</span>
        </a>
        <div class="lg:hidden">
            <button class="navbar-burger flex items-center text-blue-600 p-3">
                <svg class="block h-4 w-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <title>Mobile menu</title>
                    <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
                </svg>
            </button>
        </div>
        <div
            class="hidden absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 lg:flex lg:mx-auto lg:flex lg:items-center lg:w-auto lg:space-x-6">
            <ul>
                <li class="inline lg:px-1 xl:px-3 py-4 border-b-[4px] border-white hover:border-[#64173D]">
                    <a href="#" class="text-[16px] font-normal text-[#3A3A3A]">Home</a>
                </li>
                {% if request.user.is_authenticated %}
                    <li class="inline lg:px-1 xl:px-3 py-4 border-b-[4px] border-white hover:border-[#64173D]">
                        <a href="#" class="text-[16px] font-normal text-[#3A3A3A]">My Blog Posts</a>
                    </li>
                    <li class="inline lg:px-1 xl:px-3 py-4 border-b-[4px] border-white hover:border-[#64173D]">
                        <a href="#" class="text-[16px] font-normal text-[#3A3A3A]">My Profile</a>
                    </li>
                {% endif %}
            </ul>
        </div>
        <div class="flex hidden lg:flex">
            {% if request.user.is_authenticated %}
                <span class="mr-[15px] text-white flex text-[14px] font-normal"><img src="{% static 'img/user.png' %}"
                    class="border rounded-full w-[40px]"> <img src="{% static 'img/arrow.svg' %}" class="ml-[5px]"></span>
            {% else %}
            <button type="button" onclick="window.location.href='{% url 'signup' %}'" class="text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-full text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700">Sign Up / Login</button>
            {% endif %}
        </div>
    </div>
</nav>
<section class="w-full p-[15px] lg:p-[0] relative">
    <img src="{% static 'img/banner.svg' %}" class="w-full">
    <div class="max-w-[1200px] w-[90%] xl-mx-auto mx-auto absolute left-0 right-0 top-[60px]">
        <div class="bg-white w-full rounded-[20px] p-[40px]">
            <div class="flex justify-between items-center md:flex-wrap sm:flex-wrap flex-wrap">
                <h3 class="text-[34px] font-light landing-[27px]">Welcome to Blogger</h3>
                {% if request.user.is_authenticated %}
                    <div class="flex">
                        <a href="{% url 'create_post' %}" class="text-[14px] flex font-light text-[#000000] underline"
                            data-modal-target="defaultModal1" data-modal-toggle="defaultModal1">
                            <img src="{% static 'img/add.svg' %}" class="w-[22px] h-[22px] mx-3">
                            Create New Blog Post
                        </a>
                    </div>
                {% endif %}
            </div>
            <form method="get" action="{% url 'home' %}" class="relative md:w-[50%] w-full mt-[30px]">
                <input type="text" name="q" id="voice-search" value="{{ query }}" 
                    class="bg-[#F8F8F8] border border-[rgba(0, 0, 0, 0.35)]-300 text-black text-[13px] focus:ring-blue-500 focus:border-blue-500 block w-full p-3.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    placeholder="Search all posts by topic" required>
                <button type="submit" class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor"
                        viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </form>
            <p class="flex justify-end text-[13px] font-light my-[15px] underline">
                Show last <strong class="font-bold">month</strong>
            </p>
            {% for post in posts %}
            <div class="bg-[#F6F6F6] rounded-[4px] mb-[40px] flex md:flex-nowrap flex-wrap justify-between">
                <div class="px-[25px] py-[15px] md:w-[65%] sm:w-full w-full">
                    <p class="text-[15px] mb-[25px] text-[#000000] font-normal"><strong>{{ post.author.first_name }}</strong> - {{ post.created_at }}</p>
                    <div class="flex items-start">
                        <div>
                            <strong class="text-[16px] font-bold text-black underline">{{ post.title }}</strong>
                            <p class="text-[16px] font-normal text-black overflow-hidden text-ellipsis" style="-webkit-box-orient: vertical; -webkit-line-clamp: 2; display: -webkit-box;">
                                {{ post.content }}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="md:w-[30%] m-[10px] sm:w-full w-full">
                    <div class="p-[15px] bg-white w-full">
                        <strong class="text-[13px] font-bold text-black flex justify-between items-center"><span>CATEGORY</span></strong>
                        <div class="mt-[10px] flex gap-2 flex-wrap items-center">
                            <span class="text-[12px] inline font-normal text-[#000000] px-[10px] py-[5px] bg-[#FFDEC6] rounded-[8px]">{{ post.category }}</span>
                        </div>
                    </div>
                </div>
                <div class="md:w-[5%] sm:w-full w-full bg-[#14549E] flex justify-center items-center cursor-pointer">
                    <img src="{% static 'img/eyes.svg' %}">
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock body_content %}
